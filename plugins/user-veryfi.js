import { createHash } from 'crypto'
let Reg = /\|?(.*)([.|] *?)([0-9]*)$/i
let handler = async function (m, { conn, text, usedPrefix, command }) {
  let user = global.db.data.users[m.sender]
  let name2 = conn.getName(m.sender)
  let who = m.mentionedJid && m.mentionedJid[0] ? m.mentionedJid[0] : m.fromMe ? conn.user.jid : m.sender
  if (user.registered === true) throw `â¦‰âœ”ï¸â¦Š Â» ğ™”ğ™– ğ™šğ™¨ğ™©ğ™–ğ™¨ ğ™§ğ™šğ™œğ™ğ™¨ğ™©ğ™§ğ™–ğ™™ğ™¤, ğ™¥ğ™–ğ™§ğ™– ğ™«ğ™¤ğ™¡ğ™«ğ™šğ™§ ğ™– ğ™§ğ™šğ™œğ™ğ™¨ğ™©ğ™§ğ™–ğ™§ğ™©ğ™š ğ™©ğ™ğ™šğ™£ğ™šğ™¨ ğ™¦ğ™ªğ™š ğ™—ğ™¤ğ™§ğ™§ğ™–ğ™§ ğ™šğ™¡ ğ™§ğ™šğ™œğ™ğ™¨ğ™©ğ™§ğ™¤.\n\nğ™€ğ™…ğ™€ğ™ˆğ™‹ğ™‡ğ™Š:\nğ™ğ™¨ğ™š ğ™šğ™¡ ğ™˜ğ™¤ğ™¢ğ™–ğ™£ğ™™ğ™¤ ( ${usedPrefix}myns ) ğ™¥ğ™–ğ™§ğ™– ğ™˜ğ™¤ğ™¥ğ™ğ™–ğ™§ ğ™©ğ™ª ğ™˜ğ™¤ğ™™ğ™ğ™œğ™¤.`
  if (!Reg.test(text)) throw `â¦‰âœ–ï¸â¦Š Â» ğ™€ğ™¡ ğ™˜ğ™¤ğ™¢ğ™–ğ™£ğ™™ğ™¤ ğ™ğ™£ğ™œğ™§ğ™šğ™¨ğ™–ğ™™ğ™¤ ğ™šğ™¨ ğ™ğ™£ğ™˜ğ™¤ğ™§ğ™§ğ™šğ™˜ğ™©ğ™¤, ğ™™ğ™šğ™—ğ™š ğ™™ğ™š ğ™ªğ™¨ğ™–ğ™§ğ™¡ğ™¤ ğ™™ğ™š ğ™šğ™¨ğ™©ğ™– ğ™›ğ™¤ğ™§ğ™¢ğ™–.\n\nğ™€ğ™…ğ™€ğ™ˆğ™‹ğ™‡ğ™Š:\n${usedPrefix + command} nombre.edad\n\nğ™Šğ™ğ™ğ™Š ğ™€ğ™…ğ™€ğ™ˆğ™‹ğ™‡ğ™Š:\n${usedPrefix + command} ${name2}.20`
  let [_, name, splitter, age] = text.match(Reg)
  if (!name) throw 'â¦‰ğŸ‘¤â¦Š Â» ğ™‰ğ™¤ğ™¢ğ™—ğ™§ğ™š ğ™›ğ™–ğ™¡ğ™©ğ™–ğ™£ğ™©ğ™š, ğ™£ğ™¤ ğ™¥ğ™ªğ™šğ™™ğ™šğ™¨ ğ™§ğ™šğ™œğ™ğ™¨ğ™©ğ™§ğ™–ğ™§ğ™©ğ™š ğ™¨ğ™ğ™£ ğ™£ğ™ğ™£ğ™œğ™ªğ™£ ğ™£ğ™¤ğ™¢ğ™—ğ™§ğ™š ğ™šğ™¨ğ™¥ğ™šğ™¨ğ™ğ™›ğ™ğ™˜ğ™–ğ™™ğ™¤, ğ™ğ™£ğ™©ğ™šğ™£ğ™©ğ™–ğ™¡ğ™¤ ğ™™ğ™š ğ™£ğ™ªğ™šğ™«ğ™¤ ğ™–ğ™œğ™§ğ™šğ™œğ™–ğ™£ğ™™ğ™¤ ğ™©ğ™ª ğ™£ğ™¤ğ™¢ğ™—ğ™§ğ™š.'
  if (!age) throw 'â¦‰ğŸ‘¤â¦Š Â» ğ™‰ğ™¤ ğ™¥ğ™ªğ™šğ™™ğ™šğ™¨ ğ™§ğ™šğ™œğ™ğ™¨ğ™©ğ™§ğ™–ğ™§ğ™©ğ™š ğ™¨ğ™ğ™£ ğ™¡ğ™– ğ™šğ™™ğ™–ğ™™ ğ™šğ™¨ğ™¥ğ™šğ™¨ğ™ğ™›ğ™ğ™˜ğ™–ğ™™ğ™–, ğ™ğ™£ğ™©ğ™šğ™£ğ™©ğ™–ğ™¡ğ™¤ ğ™™ğ™š ğ™£ğ™ªğ™šğ™«ğ™¤ ğ™–ğ™œğ™§ğ™šğ™œğ™–ğ™£ğ™™ğ™¤ ğ™©ğ™ª ğ™šğ™™ğ™–ğ™™.'
  if (name.length >= 30) throw 'â¦‰âœ–ï¸â¦Š Â» ğ™€ğ™¡ ğ™£ğ™¤ğ™¢ğ™—ğ™§ğ™š ğ™£ğ™¤ ğ™™ğ™šğ™—ğ™š ğ™™ğ™š ğ™˜ğ™¤ğ™£ğ™©ğ™šğ™£ğ™šğ™§ ğ™¢ğ™–ğ™¨ ğ™™ğ™š 30 ğ™˜ğ™–ğ™§ğ™–ğ™˜ğ™©ğ™šğ™§ğ™šğ™¨, ğ™ğ™£ğ™©ğ™šğ™£ğ™©ğ™–ğ™¡ğ™¤ ğ™™ğ™š ğ™£ğ™ªğ™šğ™«ğ™¤.' 
  age = parseInt(age)
  if (age > 999) throw 'â¦‰âŒâ¦Š Â» ğ™€ğ™™ğ™–ğ™™ ğ™šğ™§ğ™§ğ™¤ğ™£ğ™šğ™¤, ğ™¨ğ™¤ğ™¡ğ™¤ ğ™¨ğ™š ğ™–ğ™™ğ™¢ğ™ğ™©ğ™š ğ™ğ™–ğ™¨ğ™©ğ™– 999.'
  if (age < 5) throw 'â¦‰âŒâ¦Š Â» ğ™‰ğ™¤ ğ™¨ğ™š ğ™–ğ™˜ğ™šğ™¥ğ™©ğ™–ğ™£ ğ™£ğ™ğ™£Ìƒğ™¤ğ™¨ ğ™ªğ™¨ğ™–ğ™£ğ™™ğ™¤ ğ™šğ™¡ ğ™—ğ™¤ğ™©, ğ™šğ™¨ ğ™¥ğ™¤ğ™§ ğ™¨ğ™ª ğ™—ğ™ğ™šğ™£...'
  user.name = name.trim()
  user.age = age
  user.regTime = + new Date
  user.registered = true
let sn = createHash('md5').update(m.sender).digest('hex').slice(0, 6)        
let img = imagen2;
  await conn.sendMessage(m.chat, { react: { text: 'âœ…', key: m.key } })
let gokureg = `
â’â€¢â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢â‹„
â”‚ğ—©ğ—˜ğ—¥ğ—œğ—™ğ—œğ—˜ğ—— ğ—¦ğ—¨ğ—–ğ—–ğ—˜ğ—¦ğ—¦ğ—™ğ—¨ğ—Ÿğ—Ÿğ—¬
â’â€¢â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â€¢â‹„

â‹„ ğŸ‘¤ Â» ğ—¡ğ—¼ğ—ºğ—¯ğ—¿ğ—²:
âŒ‘ ${name}

â‹„ âœ”ï¸ Â» ğ—¡ğ—¼ğ—ºğ—¯ğ—¿ğ—² ğ—¼ğ—¿ğ—´:
âŒ‘ @${name2}

â‹„ ğŸ“… Â» ğ—˜ğ—±ğ—®ğ—±:
âŒ‘ ${age}

â‹„ â° Â» ğ—™ğ—²ğ—°ğ—µğ—® ğ—±ğ—² ğ˜ƒğ—²ğ—¿ğ—¶ğ—³ğ—¶ğ—°ğ—®ğ—°ğ—¶ğ—¼ğ—»:
âŒ‘ ${regTime}

â‹„ âœ… Â» ğ—¥ğ—²ğ—´ğ—¶ğ˜€ğ˜ğ—¿ğ—¼:
âŒ‘ á´ á´‡Ê€ÉªÒ“Éªá´„á´€á´…á´.`
conn.sendMessage(m.chat, {
text: gokureg,
contextInfo: {
externalAdReply: {
title: 'âš¡ â€¢ ğ™‚ğ™¤ğ™ ğ™ªğ˜½ğ™¤ğ™©-ğ™ˆğ˜¿ : ğ™‘ğ™€ğ™ğ™„ğ™ğ™” â€¢ âš¡',
body: 'á´ á´‡Ê€ÉªÒ“Éªá´„á´€á´…á´/á´€ á´„á´É´ á´‡xÉªá´›á´, á´˜á´œá´‡á´…á´‡ á´œsá´€Ê€ sá´œs Ò“á´œÉ´á´„Éªá´É´á´‡s.', 
thumbnaiUrl: img, 
sourceUrl: `${md}`,
mediaType: 1,
showAdAttribution: true,
renderLargerThumbnail: false,
}}}, { quoted: m })
await m.reply(`\`ğ—–ğ—¢ğ——ğ—œğ—šğ—¢ ğ——ğ—˜ ğ—©ğ—˜ğ—¥ğ—œğ—™ğ—œğ—–ğ—”ğ—–ğ—œğ—¢ğ—¡:\`\n> ${sn}`)        
}
handler.help = ['reg'].map(v => v + ' <nombre.edad>')
handler.tags = ['rg']

handler.command = ['verify', 'verificar', 'reg', 'register', 'registrar'] 

export default handler
